<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- mapper:根标签，namespace：命名空间，随便写，一般保证命名空间唯一 -->
<mapper namespace="com.fh.dao.CommodityDao">
    <!-- statement，内容：sql语句。id：唯一标识，随便写，在同一个命名空间下保持唯一
       resultType：sql语句查询结果集的封装类型,tb_user即为数据库中的表
     -->
    <!-- insert into 表名 （字段名,字段名） value （字段值，字段值）-->

    <select id="queryCommodityIsSell"  resultType="com.fh.entity.vo.CommodityPranr">
         select  commodityId,commodityName ,imgPath  ,price  from shop_commodity where isSell=1
    </select>
    <select id="queryCommodityTypeById"  resultType="com.fh.entity.vo.CommodityPranr">
        select  commodityId,commodityName ,imgPath  ,price  from shop_commodity
        <if test="typeId!=null">
            where typeId=#{typeId}
        </if>
    </select>

    <select id="queryCommodityCartById"  resultType="com.fh.entity.vo.CommodityCart" parameterType="java.lang.Integer">
         select  commodityId,commodityName,imgPath,price,stock  from shop_commodity where commodityId=#{commodityId}
    </select>
    <update id="updateCommodityStock">
        update shop_commodity set stock=stock-#{count} where commodityId=#{commodityId} and stock-#{count}>=0
    </update>

</mapper>